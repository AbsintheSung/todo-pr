import{l as n,a as c,t as i,e as m}from"./swal-BUWR2XwI.js";const l=document.querySelector(".register-form"),u=document.querySelector(".register-email"),d=document.querySelector(".register-name"),g=document.querySelector(".register-password");document.querySelector(".confirmation-password");const p=document.querySelector(".register-btn"),f=document.querySelectorAll(".register-warn"),t=Array.from(f),y={email:{presence:{message:"必填"},email:{message:"須符合Email格式"}},nickname:{presence:{message:"必填"}},password:{presence:{message:"必填"},length:{minimum:6,message:"密碼長度必須大於6"}},repassword:{presence:{message:"必填"},equality:{attribute:"password",message:"必須與密碼相同"}}};function a(){t.forEach(e=>{e.textContent=""})}function w(e){for(let s in e)t.forEach(r=>{r.id===s&&(r.textContent=e[s].pop().split(" ").slice(1).join(" "))})}async function q(e){const s="https://todoo.5xcamp.us/users";try{n("註冊中"),(await c.post(s,e)).status===201&&(i("success","註冊成功"),location.href="../pages/index.html")}catch(r){const o=r.response.data.message+" "+r.response.data.error[0];m(o,"error")}}p.addEventListener("click",async e=>{e.preventDefault();const s=validate(l,y),r={user:{email:u.value,nickname:d.value,password:g.value}};a(),s?w(s):await q(r)});a();
